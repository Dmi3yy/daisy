<div class="navbar bg-base-100 shadow-sm">
  <!-- Logo and brand -->
  <div class="flex-1">
    <a class="btn btn-ghost text-xl gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 90" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8">
        <path d="m37.361 37.392 6.783 16.393 6.792-16.393M32.017 45.49h-7.908M33.161 37.392h-9.3v16.393h9.293M61.732 37.392c4.239 0 7.675 3.51 7.675 8.097 0 4.588-3.437 8.296-7.676 8.296-4.239 0-7.675-3.708-7.675-8.296 0-4.587 3.435-8.097 7.674-8.097h.002z"/>
        <path d="M45.829 8.807c19.573.002 35.44 15.174 35.439 35.01-.001 19.834-15.87 35.868-35.443 35.868-19.574 0-35.443-16.034-35.444-35.869 0-19.835 15.865-35.007 35.439-35.009h.009z"/>
        <path d="M22.837 71.115C10.95 65.332 2.745 53.035 2.744 38.773c0-19.835 15.865-35.007 35.439-35.01h.009c9.046.002 17.3 3.243 23.562 8.687"/>
        <path d="M34.652 10.59c5.906-4.288 13.233-6.782 21.168-6.783h.009c19.573.002 35.44 15.175 35.439 35.01 0 10.025-4.055 19.08-10.593 25.583"/>
        <path d="M68.538 16.749c10.126 6.054 16.73 17.13 16.73 30.067-.001 19.835-15.87 35.869-35.444 35.869-8.814 0-16.878-3.252-23.079-8.638M68.392 16.87"/>
        <path d="M60.448 81.004a34.999 34.999 0 0 1-19.626 5.99c-19.574 0-35.443-16.033-35.444-35.868 0-9.088 3.33-17.198 8.824-23.318m58.13 39.768"/>
      </svg>
      <span class="font-bold hidden sm:inline">Evolution</span>
    </a>
  </div>

  <!-- Desktop menu -->
  <div class="flex-none hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      <li><a>Home</a></li>
      <li><a>Components</a></li>
      <li><a>Themes</a></li>
      <li><a>Docs</a></li>
    </ul>
  </div>

  <!-- Right side controls -->
  <div class="flex-none">
    <div class="flex items-center gap-2">
    <!-- Light/Dark mode toggle -->
    <label class="btn btn-ghost btn-circle swap swap-rotate" id="modeToggle">
      <input type="checkbox" id="modeCheckbox" />
      <!-- Sun icon (light mode) -->
      <svg class="swap-on fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg>
      <!-- Moon icon (dark mode) -->
      <svg class="swap-off fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/></svg>
    </label>

    <!-- Theme dropdown -->
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
        </svg>
      </div>
      <ul tabindex="0" class="dropdown-content bg-base-100 rounded-box z-[1] w-56 p-2 shadow-2xl border border-base-300 mt-3 max-h-96 overflow-y-auto" id="themeMenu">
        <li class="px-3 py-1 text-xs font-bold text-base-content/50 uppercase tracking-wider" id="themeMenuTitle">Themes</li>
        <!-- Will be filled by build.mjs with theme options -->
      </ul>
    </div>

    <!-- Color Palette dropdown -->
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
        </svg>
      </div>
      <div tabindex="0" class="dropdown-content bg-base-100 rounded-box z-[1] w-80 p-3 shadow-2xl border border-base-300 mt-3" id="colorPalettePanel">
        <div class="text-xs font-bold text-base-content/50 uppercase tracking-wider mb-3">Color Palette</div>
        <div class="space-y-2" id="colorPaletteContent">
          <!-- Will be filled with color pickers -->
        </div>
      </div>
    </div>

    <!-- Language dropdown -->
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
        </svg>
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow-lg">
        <li><a onclick="__setLang('uk')">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</a></li>
        <li><a onclick="__setLang('en')">üá¨üáß English</a></li>
        <li><a onclick="__setLang('pl')">üáµüá± Polski</a></li>
      </ul>
    </div>

    <!-- Settings dropdown -->
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow-lg">
        <li>
          <a onclick="document.getElementById('settings_modal').showModal()" class="justify-between">
            Theme Builder
            <span class="badge badge-sm">‚öôÔ∏è</span>
          </a>
        </li>
        <li><a onclick="__exportTheme()">Export Theme</a></li>
        <li><a onclick="document.getElementById('theme_import').click()">Import Theme</a></li>
        <li class="md:hidden"><a onclick="document.getElementById('settings_modal').showModal()">All Settings</a></li>
      </ul>
    </div>

    <!-- Mobile menu -->
    <div class="dropdown dropdown-end lg:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow-lg">
        <li><a>Home</a></li>
        <li><a>Components</a></li>
        <li><a>Themes</a></li>
        <li><a>Docs</a></li>
        <li class="md:hidden"><a onclick="document.getElementById('settings_modal').showModal()">Settings</a></li>
      </ul>
    </div>
    </div>
  </div>
</div>

<script>
  // Mode and theme management
  (function() {
    let currentMode = localStorage.getItem('evo-mode') || 'light';
    
    // Theme data with modes (not really needed, filtering by data-mode attribute)
    const themeData = {
      light: ['light', 'cupcake', 'bumblebee', 'emerald', 'corporate', 'retro', 'valentine', 'garden', 'aqua', 'pastel', 'fantasy', 'wireframe', 'cmyk', 'autumn', 'acid', 'lemonade', 'winter', 'nord', 'sunset', 'lofi', 'evo'],
      dark: ['dark', 'synthwave', 'cyberpunk', 'halloween', 'forest', 'black', 'luxury', 'dracula', 'business', 'night', 'coffee', 'dim']
    };
    
    function filterThemesByMode(mode) {
      const items = document.querySelectorAll('.theme-item');
      items.forEach(item => {
        if (item.dataset.mode === mode) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
      
      // Update title
      const title = document.getElementById('themeMenuTitle');
      if (title) {
        title.textContent = mode === 'light' ? 'Light Themes' : 'Dark Themes';
      }
    }
    
    function updateModeToggle() {
      const checkbox = document.getElementById('modeCheckbox');
      if (checkbox) {
        checkbox.checked = currentMode === 'dark';
      }
    }
    
    function updateActiveIndicators() {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      const currentPalette = document.documentElement.getAttribute('data-palette') || 'default';
      
      // Update theme checkmarks
      document.querySelectorAll('[data-theme]').forEach(btn => {
        const checkmark = btn.querySelector('.theme-checkmark');
        if (checkmark) {
          if (btn.dataset.theme === currentTheme) {
            checkmark.style.opacity = '1';
            btn.classList.add('active');
          } else {
            checkmark.style.opacity = '0';
            btn.classList.remove('active');
          }
        }
      });
      
      // Update palette checkmarks
      document.querySelectorAll('[data-palette]').forEach(btn => {
        const checkmark = btn.querySelector('.palette-checkmark');
        if (checkmark) {
          if (btn.dataset.palette === currentPalette) {
            checkmark.style.opacity = '1';
            btn.classList.add('bg-base-200');
          } else {
            checkmark.style.opacity = '0';
            btn.classList.remove('bg-base-200');
          }
        }
      });
    }
    
    // Mode toggle handler
    const modeCheckbox = document.getElementById('modeCheckbox');
    if (modeCheckbox) {
      modeCheckbox.addEventListener('change', function() {
        currentMode = this.checked ? 'dark' : 'light';
        localStorage.setItem('evo-mode', currentMode);
        
        // Switch to default theme of the mode
        const defaultTheme = currentMode === 'light' ? 'light' : 'dark';
        __setTheme(defaultTheme);
        
        // Update UI
        filterThemesByMode(currentMode);
        updateActiveIndicators();
      });
    }
    
    // Color palette panel
    function initColorPalette() {
      const colorPaletteContent = document.getElementById('colorPaletteContent');
      if (!colorPaletteContent) return;
      
      const colorVars = [
        { name: 'primary', label: 'Primary', default: '#570df8' },
        { name: 'secondary', label: 'Secondary', default: '#f000b8' },
        { name: 'accent', label: 'Accent', default: '#37cdbe' },
        { name: 'neutral', label: 'Neutral', default: '#3d4451' },
        { name: 'info', label: 'Info', default: '#3abff8' },
        { name: 'success', label: 'Success', default: '#36d399' },
        { name: 'warning', label: 'Warning', default: '#fbbd23' },
        { name: 'error', label: 'Error', default: '#f87272' }
      ];
      
      colorVars.forEach(colorVar => {
        const colorValue = getComputedStyle(document.documentElement).getPropertyValue(`--color-${colorVar.name}`) || colorVar.default;
        
        const item = document.createElement('div');
        item.className = 'flex items-center gap-2';
        item.innerHTML = `
          <div class="w-12 h-12 rounded-lg bg-${colorVar.name} flex items-center justify-center relative group">
            <input type="color" value="${colorVar.default}" 
              class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
              id="color-${colorVar.name}"
              data-color="${colorVar.name}" />
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-${colorVar.name}-content opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
            </svg>
          </div>
          <span class="text-sm font-medium flex-1">${colorVar.label}</span>
        `;
        
        colorPaletteContent.appendChild(item);
        
        // Add event listener
        const colorInput = item.querySelector(`#color-${colorVar.name}`);
        colorInput.addEventListener('change', function() {
          document.documentElement.style.setProperty(`--color-${colorVar.name}`, this.value);
          localStorage.setItem(`evo-color-${colorVar.name}`, this.value);
        });
      });
    }
    
    // Initialize
    updateModeToggle();
    filterThemesByMode(currentMode);
    updateActiveIndicators();
    initColorPalette();
    
    // Update when theme/palette changes
    const originalSetTheme = window.__setTheme;
    const originalSetPalette = window.__setPalette;
    
    window.__setTheme = function(theme) {
      originalSetTheme(theme);
      setTimeout(updateActiveIndicators, 100);
    };
    
    window.__setPalette = function(palette) {
      originalSetPalette(palette);
      setTimeout(updateActiveIndicators, 100);
    };
  })();
</script>

